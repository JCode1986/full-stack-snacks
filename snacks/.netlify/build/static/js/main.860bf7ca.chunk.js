(this.webpackJsonpsnacks=this.webpackJsonpsnacks||[]).push([[0],{37:function(e,t,a){e.exports=a(67)},42:function(e,t,a){},61:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(33),s=a.n(c),i=(a(42),a(5)),o=a.n(i),l=a(9),u=a(12),h=a(13),d=a(17),p=a(14),m=a(2),k=a(18),b=a(10),f=a.n(b),v=a(8),g=a(16),E=(a(61),a(15)),j=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={username:"",password:""},a.obtainTokens=a.obtainTokens.bind(Object(m.a)(a)),a.changeHandler=a.changeHandler.bind(Object(m.a)(a)),a}return Object(k.a)(t,e),Object(h.a)(t,[{key:"changeHandler",value:function(e){this.setState(Object(E.a)({},e.target.name,e.target.value))}},{key:"obtainTokens",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,f.a.post("http://167.172.203.221:8000/api/token/",{username:this.state.username,password:this.state.password});case 4:a=e.sent,this.props.onSuccess(a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("ugh",e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.obtainTokens},r.a.createElement("input",{name:"username",type:"text",value:this.state.username,placeholder:"username",onChange:this.changeHandler}),r.a.createElement("input",{name:"password",type:"password",value:this.state.password,placeholder:"password",onChange:this.changeHandler}),r.a.createElement("button",null,"ok")))}}]),t}(n.Component),O=a(34),H=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={title:e.snack.title,description:e.snack.description},a.changeHandler=a.changeHandler.bind(Object(m.a)(a)),a.submitHandler=a.submitHandler.bind(Object(m.a)(a)),a}return Object(k.a)(t,e),Object(h.a)(t,[{key:"changeHandler",value:function(e){this.setState(Object(E.a)({},e.target.name,e.target.value))}},{key:"submitHandler",value:function(e){e.preventDefault();var t=Object(O.a)({},this.state);this.props.onSubmit(t),this.setState({title:"",description:""})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.submitHandler},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Post"),r.a.createElement("input",{name:"title",type:"text",placeholder:"title",value:this.state.title,onChange:this.changeHandler}),r.a.createElement("textarea",{name:"description",placeholder:"description",cols:"30",rows:"10",value:this.state.description,onChange:this.changeHandler}),r.a.createElement("button",null,"ok"))))}}]),t}(n.Component);H.defaultProps={snack:{title:"",description:""}};var w=H,S=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Snack List"),r.a.createElement("ul",null,e.snacks.map((function(e){return r.a.createElement(y,{key:e.id,snack:e})}))),r.a.createElement(w,{onSubmit:e.onSubmit}))},y=function(e){return r.a.createElement("li",null,r.a.createElement(g.b,{to:"/".concat(e.snack.id)},r.a.createElement("p",null,e.snack.title)))},x=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.b,{to:"/"},r.a.createElement("p",null,"Snack List")),r.a.createElement("button",{onClick:function(){return e.onDelete(e.snack.id)}},"delete"),r.a.createElement(w,{onSubmit:e.onSubmit,snack:e.snack}))},T="http://167.172.203.221:8000/api/",C=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={accessToken:"",refreshToken:"",snacks:null},a.loginHandler=a.loginHandler.bind(Object(m.a)(a)),a.createHandler=a.createHandler.bind(Object(m.a)(a)),a.updateHandler=a.updateHandler.bind(Object(m.a)(a)),a.deleteHandler=a.deleteHandler.bind(Object(m.a)(a)),a.renderSnackDetail=a.renderSnackDetail.bind(Object(m.a)(a)),a}return Object(k.a)(t,e),Object(h.a)(t,[{key:"loginHandler",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.access,n=t.refresh,this.setState({accessToken:a,refreshToken:n}),e.prev=2,r={headers:{Authorization:"Bearer ".concat(this.state.accessToken)}},e.next=6,f.a.get(T+"v1/",r);case 6:c=e.sent,console.log(c.data),this.setState({snacks:c.data}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error("ruhroh");case 14:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createHandler",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:"Bearer ".concat(this.state.accessToken)}},e.next=3,f.a.post(T+"v1/",t,a);case 3:n=e.sent,console.log(n.data),this.setState({snacks:this.state.snacks.concat(n.data)});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateHandler",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:"Bearer ".concat(this.state.accessToken)}},n="".concat(T,"v1/").concat(t.id),console.log("path",n),e.next=5,f.a.put(n,t,a);case 5:r=e.sent,console.log(r.data),this.setState({snacks:this.state.snacks.map((function(e){return e.id===t.id?t:e}))});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteHandler",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:"Bearer ".concat(this.state.accessToken)}},n="".concat(T,"v1/").concat(t),console.log("path",n),e.next=5,f.a.delete(n,a);case 5:r=e.sent,console.log(r.data),this.setState({snacks:this.state.snacks.filter((function(e){return e.id!==t}))});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderSnackDetail",value:function(e){if(!this.state.accessToken)return r.a.createElement(v.a,{to:"/"});var t=parseInt(e.match.params.id),a=this.state.snacks&&this.state.snacks.find((function(e){return e.id===t}));return a?r.a.createElement(x,{snack:a,onSubmit:this.updateHandler,onDelete:this.deleteHandler}):r.a.createElement(v.a,{to:"/"})}},{key:"render",value:function(){return r.a.createElement(g.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(v.d,null,r.a.createElement(v.b,{exact:!0,path:"/"},this.state.snacks?r.a.createElement(S,{snacks:this.state.snacks,onSubmit:this.createHandler}):r.a.createElement(j,{onSuccess:this.loginHandler})),r.a.createElement(v.b,{path:"/:id",render:this.renderSnackDetail}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[37,1,2]]]);
//# sourceMappingURL=main.860bf7ca.chunk.js.map